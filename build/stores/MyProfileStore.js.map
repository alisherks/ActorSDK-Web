{"version":3,"sources":["../../src/stores/MyProfileStore.js"],"names":[],"mappings":";;;;AAIA;;AACA;;;;AACA;;AACA;;;;;;;;;;;;;;AAEA,IAAI,WAAW,IAAX;IACA,QAAQ,IAAR;IACA,QAAQ,IAAR;IACA,SAAS,IAAT;IACA,eAAe,KAAf;;IAEE;;;AACJ,WADI,cACJ,CAAY,UAAZ,EAAwB;0BADpB,gBACoB;;4CACtB,kBAAM,UAAN,GADsB;GAAxB;;AADI,2BAKJ,qCAAc;AACZ,WAAO,YAAP,CADY;;;AALV,2BASJ,6BAAU;AACR,WAAO,KAAP,CADQ;;;AATN,2BAaJ,6BAAU;AACR,WAAO,KAAP,CADQ;;;AAbN,2BAiBJ,+BAAW;AACT,WAAO,MAAP,CADS;;;AAjBP,2BAqBJ,mCAAa;AACX,WAAO,QAAP,CADW;;;AArBT,2BAyBJ,iCAAW,SAAS;AAClB,eAAW,OAAX,CADkB;AAElB,YAAQ,QAAQ,IAAR,CAFU;AAGlB,YAAQ,QAAQ,IAAR,CAHU;AAIlB,aAAS,QAAQ,KAAR,CAJS;;;AAzBhB,2BAgCJ,qCAAa,QAAQ;AACnB,YAAO,OAAO,IAAP;AACL,WAAK,+BAAY,qBAAZ;AACH,uBAAe,IAAf,CADF;AAEE,aAAK,YAAL,GAFF;AAGE,cAHF;AADF,WAKO,+BAAY,qBAAZ;AACH,uBAAe,KAAf,CADF;AAEE,aAAK,YAAL,GAFF;AAGE,cAHF;AALF,WASO,+BAAY,kBAAZ;AACH,aAAK,UAAL,CAAgB,OAAO,OAAP,CAAhB,CADF;AAEE,aAAK,YAAL,GAFF;AAGE,cAHF;AATF,WAaO,+BAAY,oBAAZ;AACH,YAAI,UAAU,OAAO,IAAP,EAAa;AACzB,kBAAQ,OAAO,IAAP,CADiB;AAEzB,gCAAY,UAAZ,CAAuB,KAAvB,EAFyB;AAGzB,eAAK,YAAL,GAHyB;SAA3B;AAKA,cANF;AAbF,WAoBO,+BAAY,wBAAZ;AACH,YAAI,UAAU,OAAO,IAAP,EAAa;AACzB,kBAAQ,OAAO,IAAP,CADiB;AAEzB,gCAAY,UAAZ,CAAuB,KAAvB,EAFyB;AAGzB,eAAK,YAAL,GAHyB;SAA3B;AAKA,cANF;AApBF,WA2BO,+BAAY,6BAAZ;AACH,YAAI,WAAW,OAAO,KAAP,EAAc;AAC3B,mBAAS,OAAO,KAAP,CADkB;AAE3B,eAAK,YAAL,GAF2B;SAA7B;AAIA,cALF;AA3BF;KADmB;;;SAhCjB;;;kBAuES,IAAI,cAAJ","file":"MyProfileStore.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport { Store } from 'flux/utils';\nimport Dispatcher from '../dispatcher/ActorAppDispatcher';\nimport { ActionTypes } from '../constants/ActorAppConstants';\nimport ActorClient from '../utils/ActorClient';\n\nlet _profile = null,\n    _name = null,\n    _nick = null,\n    _about = null,\n    _isModalOpen = false;\n\nclass MyProfileStore extends Store {\n  constructor(Dispatcher) {\n    super(Dispatcher);\n  }\n\n  isModalOpen() {\n    return _isModalOpen;\n  }\n\n  getName() {\n    return _name;\n  }\n\n  getNick() {\n    return _nick;\n  }\n\n  getAbout() {\n    return _about;\n  }\n\n  getProfile() {\n    return _profile;\n  }\n\n  setProfile(profile) {\n    _profile = profile;\n    _name = profile.name;\n    _nick = profile.nick;\n    _about = profile.about;\n  };\n\n  __onDispatch(action) {\n    switch(action.type) {\n      case ActionTypes.MY_PROFILE_MODAL_SHOW:\n        _isModalOpen = true;\n        this.__emitChange();\n        break;\n      case ActionTypes.MY_PROFILE_MODAL_HIDE:\n        _isModalOpen = false;\n        this.__emitChange();\n        break;\n      case ActionTypes.MY_PROFILE_CHANGED:\n        this.setProfile(action.profile);\n        this.__emitChange();\n        break;\n      case ActionTypes.MY_PROFILE_SAVE_NAME:\n        if (_name !== action.name) {\n          _name = action.name;\n          ActorClient.editMyName(_name);\n          this.__emitChange();\n        }\n        break;\n      case ActionTypes.MY_PROFILE_SAVE_NICKNAME:\n        if (_nick !== action.nick) {\n          _nick = action.nick;\n          ActorClient.editMyNick(_nick);\n          this.__emitChange();\n        }\n        break;\n      case ActionTypes.MY_PROFILE_EDIT_ABOUT_SUCCESS:\n        if (_about !== action.about) {\n          _about = action.about;\n          this.__emitChange();\n        }\n        break;\n      default:\n    }\n  };\n}\n\nexport default new MyProfileStore(Dispatcher);\n"]}