{"version":3,"sources":["../../../src/components/common/DropZone.react.js"],"names":[],"mappings":"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","file":"DropZone.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport { union, without } from 'lodash';\nimport React, { Component, PropTypes } from 'react';\nimport classnames from 'classnames';\n\nlet targetCollection = [];\n\nexport default class DropZone extends Component {\n  static propTypes = {\n    children: PropTypes.node,\n\n    onDropComplete: PropTypes.func.isRequired,\n\n    // Callbacks\n    onDragEnterCallback: PropTypes.func,\n    onDragLeaveCallback: PropTypes.func,\n    onDropCallback: PropTypes.func\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isActive: false,\n      isHovered: false\n    };\n\n    window.addEventListener('dragenter', this.onWindowDragEnter, false);\n    window.addEventListener('dragover', this.onWindowDragOver, false);\n    window.addEventListener('dragleave', this.onWindowDragLeave, false);\n    window.addEventListener('drop', this.onWindowDragLeave, false);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('dragenter', this.onWindowDragEnter, false);\n    window.removeEventListener('dragover', this.onWindowDragOver, false);\n    window.removeEventListener('dragleave', this.onWindowDragLeave, false);\n    window.removeEventListener('drop', this.onWindowDragLeave, false);\n  }\n\n  onWindowDragEnter = (event) => {\n    const { onDragEnterCallback } = this.props;\n    event.preventDefault();\n\n    if (targetCollection.length === 0) {\n      this.setState({isActive: true});\n      onDragEnterCallback && onDragEnterCallback();\n    }\n\n    targetCollection = union(targetCollection, [event.target]);\n  };\n  onWindowDragOver = (event) => event.preventDefault();\n  onWindowDragLeave = (event) => {\n    const { onDragLeaveCallback } = this.props;\n    event.preventDefault();\n\n    targetCollection = without(targetCollection, event.target);\n\n    if (targetCollection.length === 0) {\n      this.setState({isActive: false});\n      onDragLeaveCallback && onDragLeaveCallback();\n    }\n  };\n\n  onDragEnter = () => this.setState({isHovered: true});\n  onDragLeave = () => this.setState({isHovered: false});\n  onDrop = (event) => {\n    const { onDropCallback, onDropComplete } = this.props;\n    this.onDragLeave();\n    this.onWindowDragLeave(event);\n    onDropCallback && onDropCallback();\n    onDropComplete(event.dataTransfer.files);\n  };\n\n  render() {\n    const { isActive, isHovered } = this.state;\n\n    const dropzoneClassName = classnames('dropzone', {\n      'dropzone--hover': isHovered\n    });\n\n    if (isActive) {\n      return (\n        <div className={dropzoneClassName}\n             onDragEnter={this.onDragEnter}\n             onDragLeave={this.onDragLeave}\n             onDrop={this.onDrop}>\n          {this.props.children || 'Drop here'}\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n"]}