{"version":3,"sources":["../../../src/components/activity/GroupMember.react.js"],"names":[],"mappings":"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","file":"GroupMember.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { Container } from 'flux/utils';\nimport { FormattedMessage } from 'react-intl';\nimport confirm from '../../utils/confirm'\nimport { escapeWithEmoji } from '../../utils/EmojiUtils'\nimport ActorClient from '../../utils/ActorClient'\n\nimport DialogActionCreators from '../../actions/DialogActionCreators';\nimport KickUserActionCreators from '../../actions/KickUserActionCreators';\n\nimport KickUserStore from '../../stores/KickUserStore'\n\nimport AvatarItem from '../common/AvatarItem.react';\nimport Stateful from '../common/Stateful';\n\nclass GroupMember extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  static propTypes = {\n    peerInfo: PropTypes.object.isRequired,\n    canKick: PropTypes.bool.isRequired,\n    gid: PropTypes.number.isRequired\n  };\n\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  static getStores() {\n    return [KickUserStore];\n  }\n\n  static calculateState(prevState, nextProps) {\n    return {\n      kickUserState: KickUserStore.getKickUserState(nextProps.peerInfo.peer.id)\n    };\n  }\n\n  componentWillUnmount() {\n    const { peerInfo } = this.props;\n    KickUserStore.resetKickUserState(peerInfo.peer.id);\n  };\n\n  onClick = (id) => DialogActionCreators.selectDialogPeerUser(id);\n\n  onKick = (gid, uid) => {\n    const { peerInfo } = this.props;\n    const { intl } = this.context;\n\n    confirm(<FormattedMessage id=\"modal.confirm.kick\" values={{name: peerInfo.title}}/>).then(\n      () => KickUserActionCreators.kickMember(gid, uid),\n      () => {}\n    );\n  };\n\n  render() {\n    const { peerInfo, canKick, gid } = this.props;\n    const { kickUserState } = this.state;\n    const { intl } = this.context;\n    const myId = ActorClient.getUid();\n\n    let controls;\n    if (canKick && peerInfo.peer.id !== myId) {\n      controls = (\n        <div className=\"controls pull-right\">\n          <Stateful.Root currentState={kickUserState}>\n            <Stateful.Pending>\n              <a onClick={() => this.onKick(gid, peerInfo.peer.id)}>{intl.messages['kick']}</a>\n            </Stateful.Pending>\n            <Stateful.Processing>\n              <i className=\"material-icons spin\">autorenew</i>\n            </Stateful.Processing>\n            <Stateful.Success>\n              <i className=\"material-icons\">check</i>\n            </Stateful.Success>\n            <Stateful.Failure>\n              <i className=\"material-icons\">warning</i>\n            </Stateful.Failure>\n          </Stateful.Root>\n        </div>\n      );\n    } else {\n      controls = null;\n    }\n\n    return (\n      <li className=\"group_profile__members__list__item\">\n        <a onClick={() => this.onClick(peerInfo.peer.id)}>\n          <AvatarItem image={peerInfo.avatar}\n                      placeholder={peerInfo.placeholder}\n                      title={peerInfo.title}/>\n        </a>\n\n        <a onClick={() => this.onClick(peerInfo.peer.id)}\n           dangerouslySetInnerHTML={{__html: escapeWithEmoji(peerInfo.title)}}/>\n\n        {controls}\n      </li>\n    )\n  }\n}\n\nexport default Container.create(GroupMember, {pure: false, withProps: true});\n"]}