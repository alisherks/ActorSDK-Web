{"version":3,"sources":["../../src/components/Main.react.js"],"names":[],"mappings":";;;;AAIA;;;;AACA;;AAEA;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;IAEM;;;AAaJ,WAbI,IAaJ,CAAY,KAAZ,EAAmB;0BAbf,MAae;;iDACjB,sBAAM,KAAN,GADiB;;UAcnB,qBAAqB,YAAM;AACzB,UAAI,CAAC,SAAS,MAAT,EAAiB;AACpB,2CAAyB,gBAAzB,GADoB;OAAtB,MAEO;AACL,2CAAyB,eAAzB,GADK;OAFP;KADmB,CAdF;;UAsBnB,YAAY,UAAC,KAAD,EAAW;;AAErB,UAAI,MAAM,OAAN,KAAkB,4BAAS,CAAT,IAAc,MAAM,OAAN,EAAe;AACjD,cAAM,eAAN,GADiD;AAEjD,cAAM,cAAN,GAFiD;AAGjD,4CAA0B,IAA1B,GAHiD;OAAnD;KAFU,CAtBO;;AAGjB,aAAS,gBAAT,CAA0B,kBAA1B,EAA8C,MAAK,kBAAL,CAA9C,CAHiB;AAIjB,aAAS,gBAAT,CAA0B,SAA1B,EAAqC,MAAK,SAAL,EAAgB,KAArD;;;AAJiB,sCAOjB,GAPiB;;AASjB,QAAI,CAAC,SAAS,MAAT,EAAiB;AACpB,yCAAyB,gBAAzB,GADoB;KAAtB;iBATiB;GAAnB;;AAbI,iBA4CJ,2BAAS;QACC,WAAa,KAAK,OAAL,CAAb,SADD;;;AAGP,QAAM,UAAU,OAAQ,SAAS,UAAT,CAAoB,OAApB,IAA+B,UAAtC,GAAoD,SAAS,UAAT,CAAoB,OAApB,oBAArD,CAHT;;AAKP,WACE;;QAAK,WAAU,KAAV,EAAL;MACE,sDADF;MAGE,8BAAC,OAAD,OAHF;MAIG,KAAK,KAAL,CAAW,QAAX;MAED,4DANF;MAOE,0DAPF;MAQE,yDARF;MASE,2DATF;MAUE,wDAVF;KADF,CALO;;;SA5CL;;;KACG,YAAY;AACjB,UAAQ,iBAAU,MAAV;AACR,YAAU,iBAAU,SAAV,CAAoB,CAC5B,iBAAU,OAAV,CAAkB,iBAAU,IAAV,CADU,EAE5B,iBAAU,IAAV,CAFQ,CAAV;;AAHE,KASG,eAAe;AACpB,YAAU,iBAAU,MAAV;;kBAwDC","file":"Main.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { KeyCodes } from '../constants/ActorAppConstants';\n\nimport { preloadEmojiSheet } from '../utils/EmojiUtils'\n\nimport VisibilityActionCreators from '../actions/VisibilityActionCreators';\nimport QuickSearchActionCreators from '../actions/QuickSearchActionCreators';\n\nimport DefaultSidebar from './Sidebar.react';\nimport Favicon from './common/Favicon.react';\n\nimport ModalsWrapper from './modals/ModalsWrapper.react';\nimport MenuOverlay from './common/MenuOverlay.react';\nimport InviteUser from './modals/InviteUser.react';\nimport InviteByLink from './modals/invite-user/InviteByLink.react';\nimport EditGroup from './modals/EditGroup.react';\n\nclass Main extends Component {\n  static propTypes = {\n    params: PropTypes.object,\n    children: PropTypes.oneOfType([\n      PropTypes.arrayOf(PropTypes.node),\n      PropTypes.node\n    ])\n  };\n\n  static contextTypes = {\n    delegate: PropTypes.object\n  };\n\n  constructor(props) {\n    super(props);\n\n    document.addEventListener('visibilitychange', this.onVisibilityChange);\n    document.addEventListener('keydown', this.onKeyDown, false);\n\n    // Preload emoji spritesheet\n    preloadEmojiSheet();\n\n    if (!document.hidden) {\n      VisibilityActionCreators.createAppVisible();\n    }\n  }\n\n  onVisibilityChange = () => {\n    if (!document.hidden) {\n      VisibilityActionCreators.createAppVisible();\n    } else {\n      VisibilityActionCreators.createAppHidden();\n    }\n  };\n\n  onKeyDown = (event) => {\n    // TODO: Make this hotkey work on windows\n    if (event.keyCode === KeyCodes.K && event.metaKey) {\n      event.stopPropagation();\n      event.preventDefault();\n      QuickSearchActionCreators.show();\n    }\n  };\n\n  render() {\n    const { delegate } = this.context;\n\n    const Sidebar = (typeof delegate.components.sidebar == 'function') ? delegate.components.sidebar : DefaultSidebar;\n\n    return (\n      <div className=\"app\">\n        <Favicon/>\n\n        <Sidebar/>\n        {this.props.children}\n\n        <ModalsWrapper/>\n        <MenuOverlay/>\n        <InviteUser/>\n        <InviteByLink/>\n        <EditGroup/>\n      </div>\n    );\n  }\n}\n\nexport default Main;\n"]}