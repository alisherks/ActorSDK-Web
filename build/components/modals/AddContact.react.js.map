{"version":3,"sources":["../../../src/components/modals/AddContact.react.js"],"names":[],"mappings":"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","file":"AddContact.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport { map, debounce } from 'lodash';\nimport React, { Component, PropTypes } from 'react';\nimport { Container } from 'flux/utils';\nimport Modal from 'react-modal';\nimport { FormattedMessage } from 'react-intl';\nimport { KeyCodes } from '../../constants/ActorAppConstants';\n\nimport AddContactActionCreators from '../../actions/AddContactActionCreators';\n\nimport AddContactStore from '../../stores/AddContactStore';\n\nimport TextField from '../common/TextField.react';\nimport ContactItem from './add-contact/ContactItem.react';\n\nclass AddContact extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  static getStores = () => [AddContactStore];\n\n  static calculateState() {\n    return {\n      isOpen: AddContactStore.isOpen(),\n      results: AddContactStore.getResults(),\n      isSearching: AddContactStore.isSearching()\n    };\n  }\n\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  componentWillMount() {\n    document.addEventListener('keydown', this.handleKeyDown, false);\n  }\n\n  componentDidMount() {\n    this.refs.query.focus();\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeyDown, false);\n  }\n\n  handleClose = () => AddContactActionCreators.close();\n\n  handleQueryChange = (event) => {\n    const query = event.target.value;\n    this.setState({query});\n    this.findUsers(query);\n  };\n\n  findUsers = debounce((query) => {\n    AddContactActionCreators.findUsers(query);\n  }, 300, {trailing: true});\n\n  addContact = () => AddContactActionCreators.findUsers(this.state.query);\n\n  handleKeyDown = (event) => {\n    if (event.keyCode === KeyCodes.ESC) {\n      event.preventDefault();\n      this.handleClose();\n    } else if (event.keyCode === KeyCodes.ENTER) {\n      event.preventDefault();\n      this.addContact()\n    }\n  };\n\n  handleSelect = (uid, isContact) => {\n    AddContactActionCreators.addToContacts(uid, isContact);\n    this.handleClose();\n  };\n\n  render() {\n    const { isOpen, isSearching, query, results } = this.state;\n    const { intl } = this.context;\n    const isQueryEmpty = !query || query.length === '';\n\n    const resultContacts = map(results, (result, index) => <ContactItem key={index} {...result} onSelect={this.handleSelect}/>);\n\n    if (resultContacts.length === 0 && !isQueryEmpty) {\n      resultContacts.push(\n        <li className=\"add-contact__results__item add-contact__results__item--not-found\">\n          {intl.messages['modal.addContact.notFound']}\n        </li>\n      );\n    }\n\n    const modalStyle = {\n      content : {\n        position: null,\n        top: null,\n        left: null,\n        right: null,\n        bottom: null,\n        border: null,\n        background: null,\n        overflow: null,\n        outline: null,\n        padding: null,\n        borderRadius: null,\n        width: 360\n      }\n    };\n\n    return (\n      <Modal className=\"modal-new modal-new--add-contact add-contact\"\n             closeTimeoutMS={150}\n             isOpen={isOpen}\n             style={modalStyle}>\n\n        <header className=\"modal-new__header\">\n          <h3 className=\"modal-new__header__title\">{intl.messages['modal.addContact.title']}</h3>\n          <a className=\"modal-new__header__close modal-new__header__icon material-icons pull-right\"\n             onClick={this.handleClose}>clear</a>\n        </header>\n\n        <div className=\"modal-new__body\">\n          <TextField className=\"input__material--wide\"\n                     floatingLabel={intl.messages['modal.addContact.query']}\n                     onChange={this.handleQueryChange}\n                     ref=\"query\"\n                     value={query}/>\n        </div>\n\n        <footer className=\"modal-new__footer\">\n          <ul className=\"add-contact__results\">\n          {\n            isQueryEmpty\n              ? <li className=\"add-contact__results__item add-contact__results__item--searching\">\n                  {intl.messages['modal.addContact.empty']}\n                </li>\n              : resultContacts\n\n              // Search is too fast for showing searching status.\n              //: isSearching\n              //  ? <li className=\"add-contact__results__item add-contact__results__item--searching\">\n              //      <FormattedMessage id=\"modal.addContact.searching\" values={{query}}/>\n              //    </li>\n              //  : resultContacts\n          }\n          </ul>\n        </footer>\n\n      </Modal>\n    );\n  }\n}\n\nexport default Container.create(AddContact);\n"]}