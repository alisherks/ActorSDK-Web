{"version":3,"sources":["../../../../src/components/modals/SendAttachment/Modal.react.js"],"names":[],"mappings":"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","file":"Modal.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport { forEach } from 'lodash';\n\nimport React, { Component, PropTypes } from 'react';\nimport { Container } from 'flux/utils';\nimport { findDOMNode } from 'react-dom';\nimport Modal from 'react-modal';\n\nimport { KeyCodes } from '../../../constants/ActorAppConstants';\n\nimport AttachmentsActionCreators from '../../../actions/AttachmentsActionCreators';\n\nimport AttachmentStore from '../../../stores/AttachmentStore';\n\nimport Attachment from './Attachment.react';\nimport Pagination from './Pagination.react';\n\nclass SendAttachment extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  static getStores = () => [AttachmentStore];\n\n  static calculateState() {\n    return {\n      isOpen: AttachmentStore.isOpen(),\n      attachments: AttachmentStore.getAllAttachments(),\n      selectedIndex: AttachmentStore.getSelectedIndex()\n    }\n  }\n\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  componentWillMount() {\n    document.addEventListener('keydown', this.handleKeyDown, false);\n  }\n  componentDidMount() {\n    findDOMNode(this.refs.send).focus()\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeyDown, false);\n  }\n\n  handleClose = () => AttachmentsActionCreators.hide();\n\n  handleKeyDown = (event) => {\n    event.preventDefault();\n    switch (event.keyCode) {\n      case KeyCodes.ESC:\n        this.handleClose();\n        break;\n      case KeyCodes.ENTER:\n        if (event.shiftKey) {\n          this.handleSendAll();\n        } else {\n          this.handleSend();\n        }\n        break;\n    }\n  };\n\n  handleSelect = (index) => AttachmentsActionCreators.selectAttachment(index);\n\n  handleCancel = () => AttachmentsActionCreators.deleteAttachment();\n\n  handleSend = () => AttachmentsActionCreators.sendAttachment(AttachmentStore.getAttachment(), this.state.selectedIndex);\n\n  handleSendAll = () => AttachmentsActionCreators.sendAll(this.state.attachments);\n\n  render() {\n    const { isOpen, attachments, selectedIndex } = this.state;\n    const { intl } = this.context;\n    const isSingleFile = attachments.length > 1;\n    const modalStyle = {\n      content : {\n        position: null,\n        top: null,\n        left: null,\n        right: null,\n        bottom: null,\n        border: null,\n        background: null,\n        overflow: null,\n        outline: null,\n        padding: null,\n        borderRadius: null,\n        width: 700\n      }\n    };\n\n    return (\n      <Modal className=\"modal-new modal-new--attachments\"\n             closeTimeoutMS={150}\n             isOpen={isOpen}\n             style={modalStyle}>\n\n        <header className=\"modal-new__header\">\n          <h3 className=\"modal-new__header__title\">{intl.messages['modal.attachments.title']}</h3>\n          {\n            isSingleFile\n              ? <button className=\"button button--lightblue pull-right\"\n                        onClick={this.handleSendAll}>{intl.messages['button.sendAll']}</button>\n              : null\n          }\n        </header>\n\n        <section className=\"modal-new__body\">\n          <Attachment attachment={attachments[selectedIndex]}/>\n        </section>\n\n        <footer className=\"modal-new__footer row\">\n          <div className=\"col-xs\">\n            {\n              isSingleFile\n                ? <Pagination current={selectedIndex}\n                              total={attachments.length - 1}\n                              onChange={this.handleSelect}/>\n                : null\n            }\n          </div>\n\n          <div className=\"col-xs text-right\">\n            <button className=\"button\"\n                    onClick={this.handleCancel}>{intl.messages['button.cancel']}</button>\n            <button className=\"button button--rised\" ref=\"send\"\n                    onClick={this.handleSend}>{intl.messages['button.send']}</button>\n          </div>\n        </footer>\n      </Modal>\n    );\n  }\n}\n\nexport default Container.create(SendAttachment, {pure: false});\n"]}