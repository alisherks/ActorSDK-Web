{"version":3,"sources":["../../../../src/components/dialog/messages/Reactions.react.js"],"names":[],"mappings":";;;;AAIA;;;;AACA;;;;AACA;;;;AAEA;;;;;;;;;;;;;;IAEM;;;AACJ,WADI,gBACJ,CAAY,KAAZ,EAAmB;0BADf,kBACe;;iDACjB,sBAAM,KAAN,GADiB;;UAwBnB,gBAAgB,YAAM;AACpB,sCAAsB,OAAtB,CAA8B,MAAK,KAAL,CAAW,IAAX,EAAiB,MAAK,KAAL,CAAW,OAAX,CAAmB,GAAnB,CAA/C,CADoB;AAEpB,YAAK,QAAL,CAAc,EAAC,kBAAkB,IAAlB,EAAf,EAFoB;KAAN,CAxBG;;UA4BnB,mBAAmB,YAAM;AACvB,sCAAsB,UAAtB,CAAiC,MAAK,KAAL,CAAW,IAAX,EAAiB,MAAK,KAAL,CAAW,OAAX,CAAmB,GAAnB,CAAlD,CADuB;AAEvB,YAAK,QAAL,CAAc,EAAC,kBAAkB,IAAlB,EAAf,EAFuB;KAAN,CA5BA;;AAGjB,UAAK,KAAL,GAAa;AACX,uBAAiB,IAAjB;KADF,CAHiB;;GAAnB;;AADI,6BAcJ,+DAA0B,WAAW;AACnC,QAAI,KAAK,KAAL,CAAW,gBAAX,EAA6B;AAC/B,WAAK,QAAL,CAAc;AACZ,yBAAiB,KAAjB;AACA,0BAAkB,KAAlB;OAFF,EAD+B;KAAjC,MAKO;AACL,WAAK,QAAL,CAAc,EAAC,iBAAiB,IAAjB,EAAf,EADK;KALP;;;AAfE,6BAkCJ,2BAAS;QACC,UAAY,KAAK,KAAL,CAAZ,QADD;QAEC,kBAAoB,KAAK,KAAL,CAApB,gBAFD;;AAGP,QAAM,eAAe,QAAQ,SAAR,CAAkB,MAAlB,GAA2B,CAA3B,CAHd;;AAKP,QAAI,gBAAJ,CALO;AAMP,QAAI,OAAO;;QAAG,WAAU,qBAAV,EAAgC,SAAS,KAAK,aAAL,EAA5C;;KAAP,CANG;AAOP,QAAI,qBAAqB,wBAArB,CAPG;;AASP,QAAI,YAAJ,EAAkB;AAChB,UAAM,cAAc,QAAQ,SAAR,CAAkB,CAAlB,EAAqB,QAArB,CADJ;;AAGhB,2BAAqB,0BAAW,kBAAX,EAA+B;AAClD,iDAAyC,YAAzC;AACA,yCAAiC,WAAjC;AACA,mDAA2C,eAA3C;OAHmB,CAArB,CAHgB;;AAShB,UAAI,WAAJ,EAAiB;AACf,eAAO;;YAAG,WAAU,qBAAV,EAAgC,SAAS,KAAK,gBAAL,EAA5C;;SAAP,CADe;OAAjB;;AAIA,UAAI,QAAQ,SAAR,CAAkB,CAAlB,EAAqB,IAArB,CAA0B,MAA1B,GAAmC,CAAnC,EAAsC;AACxC,kBAAU;;YAAM,WAAU,SAAV,EAAoB,KAAK,CAAL,EAA1B;UAAmC,QAAQ,SAAR,CAAkB,CAAlB,EAAqB,IAArB,CAA0B,MAA1B;SAA7C,CADwC;OAA1C,MAEO;AACL,kBAAU,IAAV,CADK;OAFP;KAbF;;AAoBA,WACE;;QAAK,WAAW,kBAAX,EAAL;MACE;;UAAoB,gBAAe,SAAf,EAAyB,wBAAwB,GAAxB,EAA6B,wBAAwB,GAAxB,EAA1E;QACG,OADH;OADF;MAIG,IAJH;KADF,CA7BO;;;SAlCL;;;iBASG,YAAY;AACjB,QAAM,iBAAU,MAAV,CAAiB,UAAjB;AACN,WAAS,iBAAU,MAAV,CAAiB,UAAjB;;kBA+DE","file":"Reactions.react.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport classnames from 'classnames';\nimport CSSTransitionGroup from 'react-addons-css-transition-group';\n\nimport MessageActionCreators from '../../../actions/MessageActionCreators';\n\nclass MessageReactions extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      canAnimateHeart: true\n    };\n  }\n\n  static propTypes = {\n    peer: PropTypes.object.isRequired,\n    message: PropTypes.object.isRequired\n  };\n\n  componentWillReceiveProps(nextProps) {\n    if (this.state.isThisMyReaction) {\n      this.setState({\n        canAnimateHeart: false,\n        isThisMyReaction: false\n      })\n    } else {\n      this.setState({canAnimateHeart: true})\n    }\n  }\n\n  handleAddLike = () => {\n    MessageActionCreators.addLike(this.props.peer, this.props.message.rid);\n    this.setState({isThisMyReaction: true})\n  };\n  handleRemoveLike = () => {\n    MessageActionCreators.removeLike(this.props.peer, this.props.message.rid);\n    this.setState({isThisMyReaction: true})\n  };\n\n  render() {\n    const { message } = this.props;\n    const { canAnimateHeart } = this.state;\n    const hasReactions = message.reactions.length > 0;\n\n    let counter;\n    let icon = <i className=\"icon material-icons\" onClick={this.handleAddLike}>favorite</i>;\n    let reactionsClassName = 'message__actions__like';\n\n    if (hasReactions) {\n      const amILikeThat = message.reactions[0].isOwnSet;\n\n      reactionsClassName = classnames(reactionsClassName, {\n        'message__actions__like--has-reactions': hasReactions,\n        'message__actions__like--liked': amILikeThat,\n        'message__actions__like--with-animations': canAnimateHeart\n      });\n\n      if (amILikeThat) {\n        icon = <i className=\"icon material-icons\" onClick={this.handleRemoveLike}>favorite</i>\n      }\n\n      if (message.reactions[0].uids.length > 0) {\n        counter = <span className=\"counter\" key={1}>{message.reactions[0].uids.length}</span>;\n      } else {\n        counter = null\n      }\n    }\n\n    return (\n      <div className={reactionsClassName}>\n        <CSSTransitionGroup transitionName=\"counter\" transitionEnterTimeout={125} transitionLeaveTimeout={100}>\n          {counter}\n        </CSSTransitionGroup>\n        {icon}\n      </div>\n    )\n  }\n}\n\nexport default MessageReactions;\n"]}