{"version":3,"sources":["../../src/l18n/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport assignDeep from 'assign-deep';\nimport DelegateContainer from '../utils/DelegateContainer';\n\nimport russian from './ru-RU';\nimport english from './en-US';\nimport spanish from './es-ES';\nimport portuguese from './pt-BR';\nimport chinese from './zh-CN';\n\nimport { addLocaleData } from 'react-intl';\n\nimport enLocaleData from 'react-intl/lib/locale-data/en';\nimport ruLocaleData from 'react-intl/lib/locale-data/ru';\nimport esLocaleData from 'react-intl/lib/locale-data/es';\nimport ptLocaleData from 'react-intl/lib/locale-data/pt';\nimport zhLocaleData from 'react-intl/lib/locale-data/zh';\n\naddLocaleData(enLocaleData);\naddLocaleData(ruLocaleData);\naddLocaleData(esLocaleData);\naddLocaleData(ptLocaleData);\naddLocaleData(zhLocaleData);\n\nlet language = navigator.language.toLocaleLowerCase() || navigator.browserLanguage.toLocaleLowerCase();\nif (language === 'zh-cn') language = 'zh';\n\nfunction buildMessages(defaultLanguage, language) {\n  if (process.env.NODE_ENV === 'development') {\n    const flattenDefault = flattenMessages(defaultLanguage.messages);\n    const flattenLanguage = flattenMessages(language.messages);\n    const missingKeys = Object.keys(flattenDefault).filter((key) => !flattenLanguage[key])\n    if (missingKeys.length) {\n      const groupMessage = `There are missing transations for \"${language.locale}\" locale.`;\n      console.groupCollapsed(groupMessage);\n      missingKeys.forEach((key) => {\n        console.warn(`${key}: ${flattenDefault[key]}`);\n      });\n      console.groupEnd(groupMessage);\n    }\n  }\n\n  language.messages = assignDeep({}, defaultLanguage.messages, language.messages);\n}\n\n// Fallback to default language\nconst defaultLanguage = english;\nbuildMessages(defaultLanguage, russian);\nbuildMessages(defaultLanguage, spanish);\nbuildMessages(defaultLanguage, portuguese);\nbuildMessages(defaultLanguage, chinese);\n\n// Set language data\nconst languageData = {\n  'default': defaultLanguage,\n  'ru': russian,\n  'en': english,\n  'es': spanish,\n  'pt': portuguese,\n  'zh': chinese\n};\n\n// Extend language data from delegate\nexport function extendL18n() {\n  const delegate = DelegateContainer.get();\n\n  english.messages = delegate.l18n.english ? assignDeep({}, english.messages, delegate.l18n.default.messages, delegate.l18n.english.messages) : english.messages;\n  russian.messages = delegate.l18n.russian ? assignDeep({}, russian.messages, delegate.l18n.default.messages, delegate.l18n.russian.messages) : russian.messages;\n  spanish.messages = delegate.l18n.spanish ? assignDeep({}, spanish.messages, delegate.l18n.default.messages, delegate.l18n.spanish.messages) : spanish.messages;\n  portuguese.messages = delegate.l18n.portuguese ? assignDeep({}, portuguese.messages, delegate.l18n.default.messages, delegate.l18n.portuguese.messages) : portuguese.messages;\n  chinese.messages = delegate.l18n.chinese ? assignDeep({}, chinese.messages, delegate.l18n.default.messages, delegate.l18n.chinese.messages) : chinese.messages;\n}\n\nfunction flattenMessages(nestedMessages, prefix = '') {\n  return Object.keys(nestedMessages).reduce((messages, key) => {\n    let value = nestedMessages[key];\n    let prefixedKey = prefix ? `${prefix}.${key}` : key;\n\n    if (typeof value === 'string') {\n      messages[prefixedKey] = value;\n    } else {\n      Object.assign(messages, flattenMessages(value, prefixedKey));\n    }\n\n    return messages;\n  }, {});\n}\n\nexport function getIntlData(locale) {\n  const lang = locale ? locale : language;\n  const currentLanguage = languageData[lang] || languageData[lang.split('-')[0]] || languageData['default']\n\n  return {\n    locale: currentLanguage.locale,\n    messages: flattenMessages(currentLanguage.messages)\n  }\n}\n"]}