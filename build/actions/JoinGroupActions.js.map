{"version":3,"sources":["../../src/actions/JoinGroupActions.js"],"names":[],"mappings":";;;;AAIA;;AACA;;AACA;;;;AACA;;;;AAEA;;;;;;AAEA,IAAM,UAAU,oBAAV;;;;kBAES;AACb,8CAAiB,OAAO;AACtB,QAAM,MAAM,UAAU,QAAV,GAAqB,KAArB,CADU;;AAGtB,QAAM,cAAc,SAAd,WAAc;aAAM,uCAAc,sBAAY,gBAAZ,CAA6B,GAA7B,CAAd,EAAiD;AACzE,iBAAS,+BAAY,mBAAZ;AACT,iBAAS,+BAAY,2BAAZ;AACT,iBAAS,+BAAY,yBAAZ;OAHe,EAIvB,EAAE,YAAF,EAJuB;KAAN,CAHE;;AAStB,QAAM,eAAe,SAAf,YAAe,CAAC,IAAD,EAAU;AAC7B,UAAI,IAAJ,EAAU;AACR,uCAAqB,gBAArB,CAAsC,IAAtC,EADQ;OAAV,MAEO;AACL,cAAM,IAAI,KAAJ,EAAN,CADK;OAFP;KADmB,CATC;;AAiBtB,QAAM,SAAS,SAAT,MAAS;aAAM,kBAAQ,OAAR,CAAgB,GAAhB;KAAN,CAjBO;;AAmBtB,kBACG,IADH,CACQ,YADR,EAEG,KAFH,CAES,MAFT,EAnBsB;GADX","file":"JoinGroupActions.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport { dispatchAsync } from '../dispatcher/ActorAppDispatcher';\nimport { ActionTypes } from '../constants/ActorAppConstants';\nimport ActorClient from '../utils/ActorClient';\nimport history from '../utils/history';\n\nimport DialogActionCreators from './DialogActionCreators';\n\nconst urlBase = 'https://quit.email';\n\nexport default {\n  joinGroupViaLink(token) {\n    const url = urlBase + '/join/' + token;\n\n    const joinViaLink = () => dispatchAsync(ActorClient.joinGroupViaLink(url), {\n      request: ActionTypes.GROUP_JOIN_VIA_LINK,\n      success: ActionTypes.GROUP_JOIN_VIA_LINK_SUCCESS,\n      failure: ActionTypes.GROUP_JOIN_VIA_LINK_ERROR\n    }, { token });\n\n    const selectJoined = (peer) => {\n      if (peer) {\n        DialogActionCreators.selectDialogPeer(peer);\n      } else {\n        throw new Error();\n      }\n    };\n\n    const goHome = () => history.replace('/');\n\n    joinViaLink()\n      .then(selectJoined)\n      .catch(goHome)\n  }\n};\n"]}